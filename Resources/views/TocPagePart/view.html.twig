{% set tocContent = '' %}

{% if pageparts.main is defined %}
	{% for pagepart in pageparts.main %}
	    {% if pagepart.getDefaultView == "KunstmaanPagePartBundle:HeaderPagePart:view.html.twig" %}
	        {% set tocContent = tocContent~'<li><a href="#'~pagepart.getTitle|url_encode~'">'~pagepart.getTitle~'</a></li>' %}
	    {% endif %}
	{% endfor %}
{% else %}
	{% for pagepart in pageparts %}
	    {% if pagepart.getDefaultView == "KunstmaanPagePartBundle:HeaderPagePart:view.html.twig" %}
	        {% set tocContent = tocContent~'<li><a href="#'~pagepart.getTitle|url_encode~'">'~pagepart.getTitle~'</a></li>' %}
	    {% endif %}
	{% endfor %}
{% endif %}

{% if tocContent %}
    <div class="toc">
        <ul>
        {{ tocContent|raw }}
        </ul>
    </div>
{% endif %}
